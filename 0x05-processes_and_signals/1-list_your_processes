#!/usr/bin/env bash
# Function to display processes in a hierarchical format

echo "USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   COMMAND"

ps -eo user=,pid=,pcpu=,pmem=,vsz=,rss=,tty=,stat=,lstart=,cmd= --no-headers | while read -r user pid pcpu pmem vsz rss tty stat dow mon day hhmmss year cmdrest; do
    # Construct START as HH:MM:SS
    start_time="$hhmmss"
    # Get full command
    cmd="$cmdrest"
    printf "%-10s %5s %4s %4s %6s %5s %-8s %-4s %s %s\n" "$user" "$pid" "$pcpu" "$pmem" "$vsz" "$rss" "$tty" "$stat" "$start_time" "$cmd"
done
